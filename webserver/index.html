<!DOCTYPE HTML>
<html>
	<head>
		<script>
			function runLoop(){
				var stateDiv = document.getElementById('stateDiv');
				window.requestAnimationFrame(runLoop);

				var gamepads = navigator.getGamepads();
				if(gamepads.length == 0)
					stateDiv.innerHTML = 'No gamepad connected';
				else{
					var gp = gamepads[0];

					var ax0 = gp.axes[2];
					var ax1 = gp.axes[3];
					var sleft = `calc(50% + ${ax0 * 380}px)`;
					var stop = `calc(50% + ${ax1 * 380}px)`;

					var bA = gp.buttons[6];
					var ssize = `${bA.pressed ? 70 : 50}px`;
					var sbgcolor = bA.pressed ? '#2ecc71' : '#c0392b';

					stateDiv.style.left = sleft;
					stateDiv.style.top  = stop;
					stateDiv.style.height = ssize;
					stateDiv.style.width = ssize;
					stateDiv.style.backgroundColor = sbgcolor;
				}
			}
			window.requestAnimationFrame(runLoop);
		</script>
	</head>
	<body>
		<div id='container' style='width: 800px; height: 800px; border: 1px solid #444; border-radius: 50%; position: absolute;'>
			<div id='stateDiv' style='height: 50px; width: 50px; border-radius: 50%; position: relative; transform: translate(-50%, -50%); transition: width .2s, height .2s, background-color .2s;'></div>
		</div>
	</body>
</html>
